(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1084:function(e,t,r){"use strict";r.r(t);r(9),r(6),r(5),r(4),r(7);var n=r(1),o=r(50),c=r(623),l=r.n(c),d=(r(41),r(234)),v=r.n(d),f=[function(data){return data},function(data){return data.boardOrder=Object.keys(data.boards),data},function(data){return data.noteOrder=Object.keys(data.notes),data},function(data){var e=!0,t=!1,r=void 0;try{for(var n,o=Object.keys(data.notes).filter((function(e){return"template"===data.notes[e].type}))[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var c=n.value;data.notes[c].content.placeholder=data.notes[c].content.placeholder.map((function(p){return p.type="text",p}))}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return data},function(data){return data.encryption={enabled:!1,check:null},data}],h=f.length,w=function(e,t,r,n,o){var c={version:h,encryption:{enabled:!1},notes:{},boards:{},boardOrder:n,noteOrder:o},l=function(data){return data};if(e){c.encryption.enabled=!0;var d=new v.a(e);l=function(data){return d.encrypt(JSON.stringify(data))},c.encryption.check=l("ENCRYPTION_CHECK")}var f=!0,w=!1,k=void 0;try{for(var m,O=t[Symbol.iterator]();!(f=(m=O.next()).done);f=!0){var y=m.value;c.notes[y.id]=l(y)}}catch(e){w=!0,k=e}finally{try{f||null==O.return||O.return()}finally{if(w)throw k}}var _=!0,x=!1,j=void 0;try{for(var P,S=r[Symbol.iterator]();!(_=(P=S.next()).done);_=!0){var C=P.value;c.boards[C.id]=l(C)}}catch(e){x=!0,j=e}finally{try{_||null==S.return||S.return()}finally{if(x)throw j}}return c},k=function(e,t){var r={};if(e&&e.version)r=e;else try{r=JSON.parse(e)}catch(e){return Promise.reject(new Error(e))}r.version!==h&&(r=m(r));var n=Promise.resolve(null);return r.encryption.enabled&&(n=t),n.then((function(e){return new Promise((function(t,n){var o=function(data){return data};if(r.encryption.enabled)try{var c=new v.a(e);if("ENCRYPTION_CHECK"!==(o=function(data){return JSON.parse(c.decrypt(data))})(r.encryption.check))return void n(new Error("password is incorrect"))}catch(e){return void n(e)}var l=[],d=[];if(r.notes)for(var f=0,h=Object.keys(r.notes);f<h.length;f++){var w=h[f];l.push(o(r.notes[w]))}if(r.boards)for(var k=0,m=Object.keys(r.boards);k<m.length;k++){var O=m[k];d.push(o(r.boards[O]))}t({notes:l,boards:d,noteOrder:r.noteOrder?r.noteOrder:[],boardOrder:r.boardOrder?r.boardOrder:[]})}))}))},m=function(data){for(var i=data.version;i<f.length;i++)console.log("Import-Migration: do Step ".concat(i+1," of ").concat(f.length)),(data=f[i](data)).version=i+1;return data};function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var y={name:"S3Export",props:{filename:{required:!1,default:"dev_notes_backup.json"},password:{required:!1}},data:function(){return{loading:!1,snackbar:{fail:{show:!1,error:null},success:{show:!1}}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)({s3Settings:"secrets/getAWSS3Settings"}),{},Object(o.d)({notes:function(e){return e.note.notes},boards:function(e){return e.board.boards},boardOrder:function(e){return e.board.boardOrder},noteOrder:function(e){return e.note.noteOrder}})),methods:{onDownloadFile:function(){var e=this;this.loading=!0;var t=w(this.password,this.notes,this.boards,this.boardOrder,this.noteOrder),r=new Blob([JSON.stringify(t,null,2)],{type:"text/json;charset=UTF-8"});new l.a({apiVersion:"2006-03-01",accessKeyId:this.s3Settings.accessKey,secretAccessKey:this.s3Settings.secret,region:this.s3Settings.region}).putObject({Body:r,Key:this.filename,Bucket:this.s3Settings.bucket},(function(t,data){if(e.loading=!1,t){switch(t.code){case"InvalidAccessKeyId":e.snackbar.fail.error=e.$t("backup.aws.s3.export.error.invalid");break;case"Forbidden":e.snackbar.fail.error=e.$t("backup.aws.s3.export.error.forbidden");break;default:e.snackbar.fail.error=t.message}e.snackbar.fail.show=!0}else e.snackbar.success.show=!0}))}}},_=r(28),x=r(36),j=r.n(x),P=r(207),S=r(175),C=r(70),$=r(428),V=r(177),E=r(176),D=r(429),component=Object(_.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onDownloadFile}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_upload")]),e._v("\n    "+e._s(e.$t("backup.aws.s3.export.title"))+"\n  ")],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary"}},[r("v-card-text",[e._v("\n        "+e._s(e.$t("backup.aws.s3.export.loading"))+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.fail.show,callback:function(t){e.$set(e.snackbar.fail,"show",t)},expression:"snackbar.fail.show"}},[e._v("\n    "+e._s(e.$t("backup.aws.s3.export.error.general",{err:e.snackbar.fail.error}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.fail.show=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success.show,callback:function(t){e.$set(e.snackbar.success,"show",t)},expression:"snackbar.success.show"}},[e._v("\n    "+e._s(e.$t("backup.aws.s3.export.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success.show=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"48a94024",null),B=component.exports;j()(component,{VBtn:P.a,VCard:S.a,VCardText:C.b,VDialog:$.a,VIcon:V.a,VProgressLinear:E.a,VSnackbar:D.a});var F={name:"BackupUnlock",props:{show:{type:Boolean,required:!1,default:!0},providePassword:{type:Function,required:!1,default:function(){}}},data:function(){return{showPassword:!1,password:null}},methods:{onUnlock:function(){this.providePassword(this.password)}}},N=r(576),A=r(79),I=Object(_.a)(F,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-dialog",{attrs:{value:e.show,persistent:""}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.$t("backup.encryption.unlock")))])]),e._v(" "),r("v-card-text",[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.onUnlock(t)}}},[r("v-text-field",{attrs:{type:e.showPassword?"text":"password",label:e.$t("backup.encryption.password.1st"),"append-icon":e.showPassword?"visibility":"visibility_off"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),r("v-card-actions",[r("div",{staticClass:"flex-grow-1"}),e._v(" "),r("v-btn",{attrs:{color:"primary",type:"submit",form:"login-form",disabled:!e.password},on:{click:e.onUnlock}},[e._v(e._s(e.$t("backup.encryption.actions.unlock")))])],1)],1)],1)],1)}),[],!1,null,"60556836",null),T=I.exports;function U(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function G(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?U(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):U(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}j()(I,{VBtn:P.a,VCard:S.a,VCardActions:C.a,VCardText:C.b,VCardTitle:C.c,VDialog:$.a,VForm:N.a,VTextField:A.a});var R={name:"S3Import",components:{BackupUnlock:T},props:{filename:{required:!1,default:"dev_notes_backup.json"}},data:function(){return{uploadError:null,unlock:{show:!1,providePasswordCallback:null},loading:!1,snackbar:{error:!1,success:!1}}},computed:G({},Object(o.c)({s3Settings:"secrets/getAWSS3Settings"})),methods:G({},Object(o.b)({setBoardOrder:"board/setBoardOrder",addBoard:"board/addBoard",clearBoards:"board/clearBoards",setNoteOrder:"note/setNoteOrder",addNote:"note/addNote",clearNotes:"note/clearNotes"}),{onUploadFile:function(){var e=this;this.uploadError=null,this.loading=!0,new l.a({apiVersion:"2006-03-01",accessKeyId:this.s3Settings.accessKey,secretAccessKey:this.s3Settings.secret,region:this.s3Settings.region}).getObject({Key:this.filename,Bucket:this.s3Settings.bucket},(function(t,data){if(e.loading=!1,t){switch(t.code){case"InvalidAccessKeyId":e.uploadError=e.$t("backup.aws.s3.export.error.invalid");break;case"Forbidden":e.uploadError=e.$t("backup.aws.s3.export.error.forbidden");break;default:e.uploadError=t.message}e.snackbar.error=!0}else{var r=new Promise((function(t,r){e.unlock.providePasswordCallback=t,e.unlock.show=!0}));k(data.Body,r).then((function(t){if(t instanceof Error)return e.uploadError=t,void(e.snackbar.error=!0);e.clearNotes(),e.clearBoards();var r=!0,n=!1,o=void 0;try{for(var c,l=t.notes[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var d=c.value;e.addNote(d)}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}e.setNoteOrder(t.noteOrder);var v=!0,f=!1,h=void 0;try{for(var w,k=t.boards[Symbol.iterator]();!(v=(w=k.next()).done);v=!0){var m=w.value;e.addBoard(m)}}catch(e){f=!0,h=e}finally{try{v||null==k.return||k.return()}finally{if(f)throw h}}e.setBoardOrder(t.boardOrder),e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.snackbar.success=!0})).catch((function(t){e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.uploadError=e.$t("backup.encryption.password.invalid"),e.snackbar.error=!0}))}}))}})},H=Object(_.a)(R,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onUploadFile}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_download")]),e._v("\n    "+e._s(e.$t("backup.aws.s3.import.title"))+"\n  ")],1),e._v(" "),r("BackupUnlock",{attrs:{show:e.unlock.show,providePassword:e.unlock.providePasswordCallback},on:{"update:show":function(t){return e.$set(e.unlock,"show",t)},"update:providePassword":function(t){return e.$set(e.unlock,"providePasswordCallback",t)},"update:provide-password":function(t){return e.$set(e.unlock,"providePasswordCallback",t)}}}),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary"}},[r("v-card-text",[e._v("\n        "+e._s(e.$t("backup.aws.s3.import.loading"))+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.error,callback:function(t){e.$set(e.snackbar,"error",t)},expression:"snackbar.error"}},[e._v("\n    "+e._s(e.$t("backup.aws.s3.import.error.general",{err:e.uploadError}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.error=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success,callback:function(t){e.$set(e.snackbar,"success",t)},expression:"snackbar.success"}},[e._v("\n    "+e._s(e.$t("backup.aws.s3.import.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"7faa8ad0",null),L=H.exports;j()(H,{VBtn:P.a,VCard:S.a,VCardText:C.b,VDialog:$.a,VIcon:V.a,VProgressLinear:E.a,VSnackbar:D.a});var W=r(481),K=r.n(W),J={name:"HelpAWSS3",components:{"vue-markdown":K.a},computed:{contentArgs:function(){return{corsOrigin:window.location.origin}}}},z=r(43),Y=r(112),M=Object(_.a)(J,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{color:"primary",flat:""}},[r("v-toolbar-title",[e._v(e._s(e.$t("backup.aws.s3.help.title")))]),e._v(" "),r("div",{staticClass:"flex-grow-1"})],1),e._v(" "),r("v-card-text",{staticClass:"pt-4"},[r("div",[r("vue-markdown",{attrs:{source:e.$t("backup.aws.s3.help.content",e.contentArgs)}})],1)]),e._v(" "),r("v-card-actions",[e._t("default")],2)],1)}),[],!1,null,"5650beb8",null),Q=M.exports;function X(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?X(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):X(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}j()(M,{VCard:S.a,VCardActions:C.a,VCardText:C.b,VToolbar:z.a,VToolbarTitle:Y.b});var ee={name:"BackupS3",components:{HelpAWSS3:Q,S3Import:L,S3Export:B},props:{defaultFilename:{required:!1,default:"dev_notes_backup.json"},password:{required:!1}},data:function(){return{rawAvailableRegions:["us-east-1","us-east-2","us-west-1","us-west-2","ca-central-1","cn-north-1","cn-northwest-1","eu-central-1","eu-west-1","eu-west-2","eu-west-3","eu-north-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-southeast-1","ap-southeast-2","ap-south-1","me-south-1","sa-east-1"],showHelp:!1,showPassword:!1,accessKey:null,secret:null,region:null,bucket:null,filename:this.defaultFilename}},computed:Z({},Object(o.c)({s3Settings:"secrets/getAWSS3Settings"}),{},Object(o.d)({isEncrypted:function(e){return e.settings.encrypted}}),{availableRegions:function(){var e=this;return this.rawAvailableRegions.map((function(t){return{text:e.$t("backup.aws.settings.region-values."+t)+" - "+t,value:t}}))},isValid:function(){return this.accessKey&&this.secret&&this.region&&this.bucket}}),methods:Z({},Object(o.b)({saveS3Settings:"secrets/setAWSS3Settings"}),{onSettingsChange:function(){this.saveS3Settings({accessKey:this.accessKey,secret:this.secret,region:this.region,bucket:this.bucket,filename:this.filename?this.filename:this.defaultFilename})}}),mounted:function(){this.s3Settings&&(this.accessKey=this.s3Settings.accessKey,this.secret=this.s3Settings.secret,this.region=this.s3Settings.region,this.bucket=this.s3Settings.bucket,this.filename=this.s3Settings.filename?this.s3Settings.filename:this.defaultFilename)}},te=r(1095),re=r(1078),ne=r(433),oe=r(435),ae=Object(_.a)(ee,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-toolbar",{attrs:{flat:""}},[r("div",{staticClass:"flex-grow-1"}),e._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(t){e.showHelp=!0}}},[r("v-icon",[e._v("help")])],1)],1),e._v(" "),r("v-dialog",{attrs:{scrollable:""},model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}},[r("HelpAWSS3",[r("div",{staticClass:"flex-grow-1"}),e._v(" "),r("v-btn",{on:{click:function(t){e.showHelp=!1}}},[e._v("\n        "+e._s(e.$t("common.confirmation.close"))+"\n      ")])],1)],1),e._v(" "),r("v-card-text",[e.isEncrypted?e._e():r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-alert",{attrs:{type:"warning",dense:"",dismissible:""}},[e._v(e._s(e.$t("backup.aws.settings.warn.decrypted")))])],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:e.$t("backup.aws.settings.access-key")},on:{change:e.onSettingsChange},model:{value:e.accessKey,callback:function(t){e.accessKey=t},expression:"accessKey"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{type:e.showPassword?"text":"password",label:e.$t("backup.aws.settings.secret"),"append-icon":e.showPassword?"visibility":"visibility_off"},on:{"click:append":function(t){e.showPassword=!e.showPassword},change:e.onSettingsChange},model:{value:e.secret,callback:function(t){e.secret=t},expression:"secret"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-autocomplete",{attrs:{label:e.$t("backup.aws.settings.region"),items:e.availableRegions},on:{change:e.onSettingsChange},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:e.$t("backup.aws.s3.settings.bucket")},on:{change:e.onSettingsChange},model:{value:e.bucket,callback:function(t){e.bucket=t},expression:"bucket"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:e.$t("backup.aws.s3.settings.filename")},on:{change:e.onSettingsChange},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1)],1)],1),e._v(" "),r("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.isValid,expression:"isValid"}]},[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{md12:"",lg6:""}},[r("S3Export",{attrs:{filename:e.filename,password:e.password},on:{"update:filename":function(t){e.filename=t}}})],1),e._v(" "),r("v-col",{attrs:{md12:"",lg6:""}},[r("S3Import",{attrs:{filename:e.filename},on:{"update:filename":function(t){e.filename=t}}})],1)],1)],1)],1)}),[],!1,null,"fab448f6",null),se=ae.exports;j()(ae,{VAlert:te.a,VAutocomplete:re.a,VBtn:P.a,VCard:S.a,VCardActions:C.a,VCardText:C.b,VCol:ne.a,VDialog:$.a,VIcon:V.a,VRow:oe.a,VTextField:A.a,VToolbar:z.a});function ce(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function ie(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ce(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):ce(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var le={name:"BackupEncryption",data:function(){return{valid:!1,enable:!1,persistent:!1,password:[null,null]}},computed:ie({},Object(o.c)({persistedPassword:"secrets/getBackupPassword"}),{},Object(o.d)({isEncrypted:function(e){return e.settings.encrypted}}),{password1Rules:function(){var e=this;return[function(t){return!!t||e.$t("common.form.validation.required")}]},password2Rules:function(){var e=this;return[function(t){return!!t||e.$t("backup.encryption.password.different")},function(t){return e.password[0]===e.password[1]||e.$t("backup.encryption.password.different")}]}}),methods:ie({},Object(o.b)({savePersistentPassword:"secrets/setBackupPassword",deletePersistentPassword:"secrets/removeBackupPassword"}),{validateChange:function(){this.$refs["encryption-enable"].validate()},onPersistPassword:function(){this.persistent?this.savePersistentPassword(this.password[0]):this.deletePersistentPassword()},onChange:function(){this.enable?this.valid&&this.$emit("onPasswordChange",this.password[0]):this.$emit("onPasswordChange",null)}}),watch:{valid:function(){this.onChange()},enable:function(){this.enable||(this.password[0]=null,this.password[1]=null),this.onChange()}},mounted:function(){this.persistedPassword&&(this.enable=!0,this.persistent=!0,this.password[0]=this.persistedPassword,this.password[1]=this.persistedPassword)}},de=r(723),ue=Object(_.a)(le,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{color:"primary",flat:""}},[r("v-toolbar-title",[e._v(e._s(e.$t("backup.encryption.title")))]),e._v(" "),r("div",{staticClass:"flex-grow-1"})],1),e._v(" "),r("v-card-text",[r("v-form",{ref:"encryption-enable",on:{change:e.onChange},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"2","align-self":"center"}},[r("v-switch",{attrs:{label:e.$t("backup.encryption.enable"),color:"primary"},model:{value:e.enable,callback:function(t){e.enable=t},expression:"enable"}})],1),e._v(" "),e.enable?[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{type:"password",label:e.$t("backup.encryption.password.1st"),rules:e.password1Rules,required:""},on:{change:e.validateChange},model:{value:e.password[0],callback:function(t){e.$set(e.password,0,t)},expression:"password[0]"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{type:"password",label:e.$t("backup.encryption.password.2nd"),rules:e.password2Rules,required:""},on:{change:e.validateChange},model:{value:e.password[1],callback:function(t){e.$set(e.password,1,t)},expression:"password[1]"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"2","align-self":"center"}},[r("v-switch",{attrs:{label:e.$t("backup.encryption.persistent"),disabled:!e.valid,color:"primary"},on:{change:e.onPersistPassword},model:{value:e.persistent,callback:function(t){e.persistent=t},expression:"persistent"}})],1)]:e._e()],2)],1),e._v(" "),e.enable&&e.persistent&&!e.isEncrypted?r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-alert",{attrs:{type:"warning",dense:"",dismissible:""}},[e._v(e._s(e.$t("backup.encryption.insecure")))])],1)],1):e._e()],1),e._v(" "),r("v-card-actions",[e._t("default")],2)],1)}),[],!1,null,"f8259d52",null),pe=ue.exports;j()(ue,{VAlert:te.a,VCard:S.a,VCardActions:C.a,VCardText:C.b,VCol:ne.a,VForm:N.a,VRow:oe.a,VSwitch:de.a,VTextField:A.a,VToolbar:z.a,VToolbarTitle:Y.b});function be(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var ve={name:"FileExport",props:["password"],data:function(){return{}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?be(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):be(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.d)({notes:function(e){return e.note.notes},boards:function(e){return e.board.boards},boardOrder:function(e){return e.board.boardOrder},noteOrder:function(e){return e.note.noteOrder}})),methods:{onDownloadFile:function(){var e=w(this.password,this.notes,this.boards,this.boardOrder,this.noteOrder),t=new Blob([JSON.stringify(e,null,2)],{type:"text/json;charset=UTF-8"}),link=this.$refs.downloadLink;link.href=window.URL.createObjectURL(t),link.download="dev_notes_backup.json",link.click()}}},fe=Object(_.a)(ve,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("v-btn",{attrs:{block:"",color:"primary"},on:{click:this.onDownloadFile}},[t("v-icon",{attrs:{left:""}},[this._v("cloud_upload")]),this._v("\n    "+this._s(this.$t("backup.file.export.title"))+"\n  ")],1),this._v(" "),t("a",{ref:"downloadLink",attrs:{hidden:""}})],1)}),[],!1,null,"18efbb8c",null),he=fe.exports;j()(fe,{VBtn:P.a,VIcon:V.a});function we(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var ke={name:"FileImport",components:{BackupUnlock:T},data:function(){return{uploadError:null,unlock:{show:!1,providePasswordCallback:null},snackbar:{error:!1,success:!1}}},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?we(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):we(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.b)({setBoardOrder:"board/setBoardOrder",addBoard:"board/addBoard",clearBoards:"board/clearBoards",setNoteOrder:"note/setNoteOrder",addNote:"note/addNote",clearNotes:"note/clearNotes"}),{onUploadFile:function(){var e=this;if(this.$refs.fileInput.files[0]){this.uploadError=null;var t=new FileReader;t.readAsText(this.$refs.fileInput.files[0],"UTF-8"),t.addEventListener("load",(function(t){var r=new Promise((function(t,r){e.unlock.providePasswordCallback=t,e.unlock.show=!0}));k(t.target.result,r).then((function(t){if(t instanceof Error)return e.uploadError=t,void(e.snackbar.error=!0);e.clearNotes(),e.clearBoards();var r=!0,n=!1,o=void 0;try{for(var c,l=t.notes[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var d=c.value;e.addNote(d)}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}e.setNoteOrder(t.noteOrder);var v=!0,f=!1,h=void 0;try{for(var w,k=t.boards[Symbol.iterator]();!(v=(w=k.next()).done);v=!0){var m=w.value;e.addBoard(m)}}catch(e){f=!0,h=e}finally{try{v||null==k.return||k.return()}finally{if(f)throw h}}e.setBoardOrder(t.boardOrder),e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.snackbar.success=!0,e.$refs.fileInput.value=""})).catch((function(t){e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.uploadError=e.$t("backup.encryption.password.invalid"),e.snackbar.error=!0,e.$refs.fileInput.value=""}))}))}}})},ge=Object(_.a)(ke,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(t){return e.$refs.fileInput.click()}}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_download")]),e._v("\n    "+e._s(e.$t("backup.file.import.title"))+"\n\n    "),r("input",{ref:"fileInput",attrs:{hidden:"",type:"file"},on:{change:e.onUploadFile}})],1),e._v(" "),r("BackupUnlock",{attrs:{show:e.unlock.show,providePassword:e.unlock.providePasswordCallback},on:{"update:show":function(t){return e.$set(e.unlock,"show",t)},"update:providePassword":function(t){return e.$set(e.unlock,"providePasswordCallback",t)},"update:provide-password":function(t){return e.$set(e.unlock,"providePasswordCallback",t)}}}),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.error,callback:function(t){e.$set(e.snackbar,"error",t)},expression:"snackbar.error"}},[e._v("\n    "+e._s(e.$t("backup.file.import.failed",{err:e.uploadError}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.error=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success,callback:function(t){e.$set(e.snackbar,"success",t)},expression:"snackbar.success"}},[e._v("\n    "+e._s(e.$t("backup.file.import.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"b8710bac",null),me=ge.exports;j()(ge,{VBtn:P.a,VIcon:V.a,VSnackbar:D.a});var Oe={name:"BackupFile",components:{FileImport:me,FileExport:he},props:["password"]},ye=Object(_.a)(Oe,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"elevation-12"},[r("v-card-actions",[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{md:"6"}},[r("FileExport",{attrs:{password:e.password},on:{"update:password":function(t){e.password=t}}})],1),e._v(" "),r("v-col",{attrs:{md:"6"}},[r("FileImport")],1)],1)],1)],1)}),[],!1,null,"76ac677e",null),_e=ye.exports;j()(ye,{VCard:S.a,VCardActions:C.a,VCol:ne.a,VRow:oe.a});var xe=r(581),je=r.n(xe),Pe=function(e){var t=je.a.create({baseURL:"https://api.github.com",headers:{Authorization:"token "+e}});return{getAll:function(){return t.get("/gists").then((function(e){return e.data}))},list:function(e){return t.get("/users/".concat(e,"/gists")).then((function(e){return e.data}))},createNew:function(e,r){var data={public:e,files:{},description:"Backup files for DevNotes - https://github.com/rainu/dev-notes"};return data.files[r]={content:"<DevNote placeholder>"},t.post("/gists",data).then((function(e){return e.data}))},saveFile:function(e,r,content){var data={files:{}};return data.files[r]={content:content},t.patch("/gists/".concat(e),data).then((function(e){return e.data}))},saveFiles:function(e,r){for(var n={},o=0,c=Object.keys(r);o<c.length;o++){var l=c[o];n[l]={content:r[l]}}return t.patch("/gists/".concat(e),{files:n}).then((function(e){return e.data}))},getFile:function(e,r){return t.get("/gists/".concat(e)).then((function(e){return e.data})).then((function(data){return data.files[r]?data.files[r].truncated?je.a.get(data.files[r].raw_url).then((function(e){return e.data})):data.files[r].content:""}))}}};function Se(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var Ce={name:"GistExport",props:{filename:{required:!1,default:"dev_notes_backup.json"},password:{required:!1}},data:function(){return{loading:!1,snackbar:{fail:{show:!1,error:null},success:{show:!1}}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Se(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Se(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)({gistSettings:"secrets/getGistSettings"}),{},Object(o.d)({notes:function(e){return e.note.notes},boards:function(e){return e.board.boards},boardOrder:function(e){return e.board.boardOrder},noteOrder:function(e){return e.note.noteOrder}})),methods:{onDownloadFile:function(){var e=this,t=w(this.password,this.notes,this.boards,this.boardOrder,this.noteOrder),r=Pe(this.gistSettings.token);this.loading=!0,r.saveFile(this.gistSettings.gist,this.filename,JSON.stringify(t)).then((function(){e.loading=!1,e.snackbar.success.show=!0})).catch((function(t){e.snackbar.fail.error=t,t&&t.response&&(401===t.response.status?e.snackbar.fail.error=e.$t("backup.gist.export.error.invalid"):403===t.response.status&&(e.snackbar.fail.error=e.$t("backup.gist.export.error.forbidden"))),e.snackbar.fail.show=!0,e.loading=!1}))}}},$e=Object(_.a)(Ce,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onDownloadFile}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_upload")]),e._v("\n    "+e._s(e.$t("backup.gist.export.title"))+"\n  ")],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary"}},[r("v-card-text",[e._v("\n        "+e._s(e.$t("backup.gist.export.loading"))+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.fail.show,callback:function(t){e.$set(e.snackbar.fail,"show",t)},expression:"snackbar.fail.show"}},[e._v("\n    "+e._s(e.$t("backup.gist.export.error.general",{err:e.snackbar.fail.error}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.fail.show=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success.show,callback:function(t){e.$set(e.snackbar.success,"show",t)},expression:"snackbar.success.show"}},[e._v("\n    "+e._s(e.$t("backup.gist.export.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success.show=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"17f6a462",null),Ve=$e.exports;j()($e,{VBtn:P.a,VCard:S.a,VCardText:C.b,VDialog:$.a,VIcon:V.a,VProgressLinear:E.a,VSnackbar:D.a});function Ee(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function De(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ee(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Ee(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var Be={name:"GistImport",components:{BackupUnlock:T},props:{filename:{required:!1,default:"dev_notes_backup.json"}},data:function(){return{downloadError:null,unlock:{show:!1,providePasswordCallback:null},loading:!1,snackbar:{error:!1,success:!1}}},computed:De({},Object(o.c)({gistSettings:"secrets/getGistSettings"})),methods:De({},Object(o.b)({setBoardOrder:"board/setBoardOrder",addBoard:"board/addBoard",clearBoards:"board/clearBoards",setNoteOrder:"note/setNoteOrder",addNote:"note/addNote",clearNotes:"note/clearNotes"}),{onUploadFile:function(){var e=this;this.downloadError=null,this.loading=!0,Pe(this.gistSettings.token).getFile(this.gistSettings.gist,this.filename).then((function(content){e.loading=!1;var t=new Promise((function(t,r){e.unlock.providePasswordCallback=t,e.unlock.show=!0}));k(content,t).then((function(t){if(t instanceof Error)return e.downloadError=t,void(e.snackbar.error=!0);e.clearNotes(),e.clearBoards();var r=!0,n=!1,o=void 0;try{for(var c,l=t.notes[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var d=c.value;e.addNote(d)}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}e.setNoteOrder(t.noteOrder);var v=!0,f=!1,h=void 0;try{for(var w,k=t.boards[Symbol.iterator]();!(v=(w=k.next()).done);v=!0){var m=w.value;e.addBoard(m)}}catch(e){f=!0,h=e}finally{try{v||null==k.return||k.return()}finally{if(f)throw h}}e.setBoardOrder(t.boardOrder),e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.snackbar.success=!0})).catch((function(t){e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.downloadError=e.$t("backup.encryption.password.invalid"),e.snackbar.error=!0}))})).catch((function(t){e.loading=!1,e.downloadError=t,e.snackbar.error=!0}))}})},Fe=Object(_.a)(Be,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onUploadFile}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_download")]),e._v("\n    "+e._s(e.$t("backup.gist.import.title"))+"\n  ")],1),e._v(" "),r("BackupUnlock",{attrs:{show:e.unlock.show,providePassword:e.unlock.providePasswordCallback},on:{"update:show":function(t){return e.$set(e.unlock,"show",t)},"update:providePassword":function(t){return e.$set(e.unlock,"providePasswordCallback",t)},"update:provide-password":function(t){return e.$set(e.unlock,"providePasswordCallback",t)}}}),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary"}},[r("v-card-text",[e._v("\n        "+e._s(e.$t("backup.gist.import.loading"))+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.error,callback:function(t){e.$set(e.snackbar,"error",t)},expression:"snackbar.error"}},[e._v("\n    "+e._s(e.$t("backup.gist.import.error.general",{err:e.downloadError}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.error=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success,callback:function(t){e.$set(e.snackbar,"success",t)},expression:"snackbar.success"}},[e._v("\n    "+e._s(e.$t("backup.gist.import.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"45427484",null),Ne=Fe.exports;j()(Fe,{VBtn:P.a,VCard:S.a,VCardText:C.b,VDialog:$.a,VIcon:V.a,VProgressLinear:E.a,VSnackbar:D.a});var Ae={name:"HelpGist",components:{"vue-markdown":K.a},computed:{contentArgs:function(){return{}}}},Ie=Object(_.a)(Ae,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{color:"primary",flat:""}},[r("v-toolbar-title",[e._v(e._s(e.$t("backup.gist.help.title")))]),e._v(" "),r("div",{staticClass:"flex-grow-1"})],1),e._v(" "),r("v-card-text",{staticClass:"pt-4"},[r("div",[r("vue-markdown",{attrs:{source:e.$t("backup.gist.help.content",e.contentArgs)}})],1)]),e._v(" "),r("v-card-actions",[e._t("default")],2)],1)}),[],!1,null,"43480b1b",null),Te=Ie.exports;function Ue(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function qe(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ue(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Ue(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}j()(Ie,{VCard:S.a,VCardActions:C.a,VCardText:C.b,VToolbar:z.a,VToolbarTitle:Y.b});var Ge={name:"BackupGist",components:{HelpGist:Te,GistImport:Ne,GistExport:Ve},props:{defaultFilename:{required:!1,default:"dev_notes_backup.json"},password:{required:!1}},data:function(){return{showHelp:!1,showToken:!1,clientId:null,token:null,gist:{loading:!1,user:null,id:null},availableGists:[],filename:this.defaultFilename}},computed:qe({},Object(o.c)({gistSettings:"secrets/getGistSettings"}),{},Object(o.d)({isEncrypted:function(e){return e.settings.encrypted}}),{isValid:function(){return this.token&&this.gist.id}}),methods:qe({},Object(o.b)({saveGistSettings:"secrets/setGistSettings"}),{refreshAvailableGists:function(){var e=this,t=Pe(this.token);this.gist.loading=!0,(this.gist.user?t.list(this.gist.user):t.getAll()).then((function(t){e.availableGists=t,e.gist.loading=!1})).catch((function(t){console.error("Could not load gists!",t),e.gist.loading=!1}))},onCreateNew:function(e){var t=this;this.gist.loading=!0,Pe(this.token).createNew(e,this.filename).then((function(e){t.availableGists.splice(0,0,e),t.gist.id=e.id,t.onSettingsChange(),t.gist.loading=!1})).catch((function(e){console.error("Could not create gist!",e),t.gist.loading=!1}))},onTokenChange:function(){this.refreshAvailableGists(),this.onSettingsChange()},onSettingsChange:function(){this.saveGistSettings({token:this.token,gist:this.gist.id,filename:this.filename?this.filename:this.defaultFilename})}}),mounted:function(){this.gistSettings&&(this.token=this.gistSettings.token,this.gist.id=this.gistSettings.gist,this.filename=this.gistSettings.filename?this.gistSettings.filename:this.defaultFilename,this.refreshAvailableGists())}},Re=r(179),He=r(190),Le=r(182),We=r(147),Ke=r(105),Je=r(178),ze=r(23),Ye=Object(_.a)(Ge,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-toolbar",{attrs:{flat:""}},[r("div",{staticClass:"flex-grow-1"}),e._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(t){e.showHelp=!0}}},[r("v-icon",[e._v("help")])],1)],1),e._v(" "),r("v-dialog",{attrs:{scrollable:""},model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}},[r("HelpGist",[r("div",{staticClass:"flex-grow-1"}),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.showHelp=!1}}},[e._v("\n        "+e._s(e.$t("common.confirmation.close"))+"\n      ")])],1)],1),e._v(" "),r("v-card-text",[e.isEncrypted?e._e():r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-alert",{attrs:{type:"warning",dense:"",dismissible:""}},[e._v(e._s(e.$t("backup.gist.settings.warn.decrypted")))])],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{type:e.showToken?"text":"password",label:e.$t("backup.gist.settings.token"),"append-icon":e.showToken?"visibility":"visibility_off"},on:{"click:append":function(t){e.showToken=!e.showToken},change:e.onTokenChange},model:{value:e.token,callback:function(t){e.token=t},expression:"token"}})],1)],1),e._v(" "),e.token?r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4","align-self":"end"}},[r("v-text-field",{attrs:{label:e.$t("backup.gist.settings.user.title"),placeholder:e.$t("backup.gist.settings.user.default")},on:{change:e.refreshAvailableGists},model:{value:e.gist.user,callback:function(t){e.$set(e.gist,"user",t)},expression:"gist.user"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-autocomplete",{attrs:{label:e.$t("backup.gist.settings.gist"),items:e.availableGists,"item-text":"description","item-value":"id",loading:e.gist.loading},on:{change:e.onSettingsChange},scopedSlots:e._u([{key:"selection",fn:function(data){return[r("v-chip",[r("v-avatar",{attrs:{left:""}},[r("v-img",{attrs:{src:data.item.owner.avatar_url,alt:data.item.owner.login}})],1),e._v("\n              "+e._s(data.item.id.substring(0,16))+"\n              "),r("v-avatar",{attrs:{right:""}},[data.item.public?r("v-icon",[e._v("lock_open")]):r("v-icon",[e._v("lock")])],1)],1)]}},{key:"item",fn:function(data){return[r("v-list-item-avatar",[r("v-img",{attrs:{src:data.item.owner.avatar_url,alt:data.item.owner.login}})],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[data.item.public?r("v-icon",[e._v("lock_open")]):r("v-icon",[e._v("lock")]),e._v("\n                "+e._s(data.item.id)+"\n              ")],1),e._v(" "),r("v-list-item-subtitle",[e._v(e._s(data.item.description?data.item.description:e.$t("backup.gist.no-description")))])],1)]}},{key:"prepend-item",fn:function(){return[r("v-list-item",{on:{click:function(t){return e.onCreateNew(!0)}}},[r("v-list-item-avatar",[r("v-icon",[e._v("lock_open")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v("\n                    "+e._s(e.$t("backup.gist.create-new-public"))+"\n                  ")])],1)],1),e._v(" "),r("v-list-item",{on:{click:function(t){return e.onCreateNew(!1)}}},[r("v-list-item-avatar",[r("v-icon",[e._v("lock")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v("\n                    "+e._s(e.$t("backup.gist.create-new-private"))+"\n                  ")])],1)],1),e._v(" "),r("v-divider")]},proxy:!0}],null,!1,959146279),model:{value:e.gist.id,callback:function(t){e.$set(e.gist,"id",t)},expression:"gist.id"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4","align-self":"end"}},[r("v-text-field",{attrs:{label:e.$t("backup.gist.settings.filename")},on:{change:e.onSettingsChange},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1)],1):e._e()],1),e._v(" "),r("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.isValid,expression:"isValid"}]},[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("GistExport",{attrs:{filename:e.filename,password:e.password},on:{"update:filename":function(t){e.filename=t}}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("GistImport",{attrs:{filename:e.filename},on:{"update:filename":function(t){e.filename=t}}})],1)],1)],1)],1)}),[],!1,null,"60e0e8a0",null),Me=Ye.exports;j()(Ye,{VAlert:te.a,VAutocomplete:re.a,VAvatar:Re.a,VBtn:P.a,VCard:S.a,VCardActions:C.a,VCardText:C.b,VChip:He.a,VCol:ne.a,VDialog:$.a,VDivider:Le.a,VIcon:V.a,VImg:We.a,VListItem:Ke.a,VListItemAvatar:Je.a,VListItemContent:ze.a,VListItemSubtitle:ze.b,VListItemTitle:ze.c,VRow:oe.a,VTextField:A.a,VToolbar:z.a});r(51),r(44);var Qe=r(203);function Xe(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var Ze={name:"DropboxExport",props:{filepath:{required:!1,default:"/dev_notes_backup.json"},password:{required:!1}},data:function(){return{loading:!1,snackbar:{fail:{show:!1,error:null},success:{show:!1}}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Xe(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Xe(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)({dropboxAuth:"secrets/getDropboxAuth"}),{},Object(o.d)({notes:function(e){return e.note.notes},boards:function(e){return e.board.boards},boardOrder:function(e){return e.board.boardOrder},noteOrder:function(e){return e.note.noteOrder}})),methods:{onDownloadFile:function(){var e=this,t=w(this.password,this.notes,this.boards,this.boardOrder,this.noteOrder),r=new Qe.Dropbox({fetch:fetch,accessToken:this.dropboxAuth.access_token,clientId:"h89z3y690lntrca"});this.loading=!0,r.filesUpload({path:this.filepath,contents:JSON.stringify(t),mode:{".tag":"overwrite"}}).then((function(){e.loading=!1,e.snackbar.success.show=!0})).catch((function(t){e.snackbar.fail.error=t.error.error_summary,e.snackbar.fail.show=!0,e.loading=!1}))}}},et=Object(_.a)(Ze,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onDownloadFile}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_upload")]),e._v("\n    "+e._s(e.$t("backup.dropbox.export.title"))+"\n  ")],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary"}},[r("v-card-text",[e._v("\n        "+e._s(e.$t("backup.dropbox.export.loading"))+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.fail.show,callback:function(t){e.$set(e.snackbar.fail,"show",t)},expression:"snackbar.fail.show"}},[e._v("\n    "+e._s(e.$t("backup.dropbox.export.error.general",{err:e.snackbar.fail.error}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.fail.show=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success.show,callback:function(t){e.$set(e.snackbar.success,"show",t)},expression:"snackbar.success.show"}},[e._v("\n    "+e._s(e.$t("backup.dropbox.export.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success.show=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"b37bb542",null),tt=et.exports;j()(et,{VBtn:P.a,VCard:S.a,VCardText:C.b,VDialog:$.a,VIcon:V.a,VProgressLinear:E.a,VSnackbar:D.a});function nt(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function ot(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?nt(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):nt(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var at={name:"DropboxImport",components:{BackupUnlock:T},props:{filepath:{required:!1,default:"/dev_notes_backup.json"}},data:function(){return{downloadError:null,unlock:{show:!1,providePasswordCallback:null},loading:!1,snackbar:{error:!1,success:!1}}},computed:ot({},Object(o.c)({dropboxAuth:"secrets/getDropboxAuth"})),methods:ot({},Object(o.b)({setBoardOrder:"board/setBoardOrder",addBoard:"board/addBoard",clearBoards:"board/clearBoards",setNoteOrder:"note/setNoteOrder",addNote:"note/addNote",clearNotes:"note/clearNotes"}),{onUploadFile:function(){var e=this;this.downloadError=null,this.loading=!0,new Qe.Dropbox({fetch:fetch,accessToken:this.dropboxAuth.access_token,clientId:"h89z3y690lntrca"}).filesDownload({path:this.filepath}).then((function(content){var t=new FileReader,r=new Promise((function(t,r){e.unlock.providePasswordCallback=t,e.unlock.show=!0}));t.addEventListener("loadend",(function(t){e.loading=!1,k(t.target.result,r).then((function(t){if(t instanceof Error)return e.downloadError=t,void(e.snackbar.error=!0);e.clearNotes(),e.clearBoards();var r=!0,n=!1,o=void 0;try{for(var c,l=t.notes[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var d=c.value;e.addNote(d)}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}e.setNoteOrder(t.noteOrder);var v=!0,f=!1,h=void 0;try{for(var w,k=t.boards[Symbol.iterator]();!(v=(w=k.next()).done);v=!0){var m=w.value;e.addBoard(m)}}catch(e){f=!0,h=e}finally{try{v||null==k.return||k.return()}finally{if(f)throw h}}e.setBoardOrder(t.boardOrder),e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.snackbar.success=!0})).catch((function(t){e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.downloadError=e.$t("backup.encryption.password.invalid"),e.snackbar.error=!0}))})),t.readAsText(content.fileBlob)})).catch((function(t){e.loading=!1,e.downloadError=t.error,e.snackbar.error=!0}))}})},st=Object(_.a)(at,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onUploadFile}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_download")]),e._v("\n    "+e._s(e.$t("backup.dropbox.import.title"))+"\n  ")],1),e._v(" "),r("BackupUnlock",{attrs:{show:e.unlock.show,providePassword:e.unlock.providePasswordCallback},on:{"update:show":function(t){return e.$set(e.unlock,"show",t)},"update:providePassword":function(t){return e.$set(e.unlock,"providePasswordCallback",t)},"update:provide-password":function(t){return e.$set(e.unlock,"providePasswordCallback",t)}}}),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary"}},[r("v-card-text",[e._v("\n        "+e._s(e.$t("backup.dropbox.import.loading"))+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.error,callback:function(t){e.$set(e.snackbar,"error",t)},expression:"snackbar.error"}},[e._v("\n    "+e._s(e.$t("backup.dropbox.import.error.general",{err:e.downloadError}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.error=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success,callback:function(t){e.$set(e.snackbar,"success",t)},expression:"snackbar.success"}},[e._v("\n    "+e._s(e.$t("backup.dropbox.import.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"b739dcba",null),ct=st.exports;function it(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function lt(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?it(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):it(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}j()(st,{VBtn:P.a,VCard:S.a,VCardText:C.b,VDialog:$.a,VIcon:V.a,VProgressLinear:E.a,VSnackbar:D.a});var ut={name:"BackupDropbox",components:{DropboxImport:ct,DropboxExport:tt},props:{defaultFilename:{required:!1,default:"dev_notes_backup.json"},defaultDirectory:{required:!1,default:"/"},password:{required:!1}},data:function(){return{showHelp:!1,showToken:!1,filename:this.defaultFilename,directory:this.defaultDirectory}},computed:lt({},Object(o.c)({dropboxAuth:"secrets/getDropboxAuth",dropboxUser:"secrets/getDropboxUser",dropboxSettings:"secrets/getDropboxSettings"}),{},Object(o.d)({isEncrypted:function(e){return e.settings.encrypted}}),{isAuthenticated:function(){return this.dropboxAuth&&this.dropboxAuth.access_token&&this.dropboxUser&&this.dropboxUser.name},authenticationUrl:function(){return new Qe.Dropbox({clientId:"h89z3y690lntrca"}).getAuthenticationUrl("".concat(window.location.origin).concat("/dev-notes/?recall=dropbox"))},filePath:function(){return"".concat(this.directory,"/").concat(this.filename).replace("//","/")},isValid:function(){return this.isAuthenticated&&this.directory&&this.filename}}),methods:lt({},Object(o.b)({logoutDropbox:"secrets/removeDropboxAuth",saveDropboxSettings:"secrets/setDropboxSettings"}),{logout:function(){var e=this;new Qe.Dropbox({fetch:fetch,accessToken:this.dropboxAuth.access_token,clientId:"h89z3y690lntrca"}).authTokenRevoke().then((function(){e.logoutDropbox()}))},onSettingsChange:function(){this.saveDropboxSettings({directory:this.directory?this.directory:this.defaultDirectory,filename:this.filename?this.filename:this.defaultFilename})}}),mounted:function(){this.dropboxSettings&&(this.directory=this.dropboxSettings.directory?this.dropboxSettings.directory:this.defaultDirectory,this.filename=this.dropboxSettings.filename?this.dropboxSettings.filename:this.defaultFilename)}},pt=r(188),bt=Object(_.a)(ut,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-text",[e.isEncrypted?e._e():r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-alert",{attrs:{type:"warning",dense:"",dismissible:""}},[e._v(e._s(e.$t("backup.dropbox.settings.warn.decrypted")))])],1)],1),e._v(" "),r("v-row",[e.isAuthenticated?[r("v-col",{attrs:{cols:"4",sm:"4","align-self":"center"}},[r("v-label",[e._v(e._s(e.$t("backup.dropbox.user"))+":")])],1),e._v(" "),r("v-col",{attrs:{cols:"8",sm:"4","align-self":"center"}},[r("v-chip",[r("v-icon",{attrs:{left:""}},[e._v("account_circle")]),e._v("\n            "+e._s(e.dropboxUser.name.display_name)+"\n          ")],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4","align-self":"end"}},[r("v-btn",{attrs:{block:"",color:"error"},on:{click:e.logout}},[e._v("\n            "+e._s(e.$t("backup.dropbox.logout"))+"\n          ")])],1)]:[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-btn",{attrs:{href:e.authenticationUrl,block:"",color:"primary"}},[e._v("\n            "+e._s(e.$t("backup.dropbox.login"))+"\n          ")])],1)]],2),e._v(" "),e.isAuthenticated?r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:e.$t("backup.dropbox.settings.directory")},on:{change:e.onSettingsChange},model:{value:e.directory,callback:function(t){e.directory=t},expression:"directory"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4","align-self":"end"}},[r("v-text-field",{attrs:{label:e.$t("backup.dropbox.settings.filename")},on:{change:e.onSettingsChange},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1)],1):e._e()],1),e._v(" "),r("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.isValid,expression:"isValid"}]},[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("DropboxExport",{attrs:{filepath:e.filePath,password:e.password},on:{"update:filepath":function(t){e.filePath=t}}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("DropboxImport",{attrs:{filepath:e.filePath},on:{"update:filepath":function(t){e.filePath=t}}})],1)],1)],1)],1)}),[],!1,null,"cee4209c",null),vt=bt.exports;j()(bt,{VAlert:te.a,VBtn:P.a,VCard:S.a,VCardActions:C.a,VCardText:C.b,VChip:He.a,VCol:ne.a,VIcon:V.a,VLabel:pt.a,VRow:oe.a,VTextField:A.a});var ft=r(665),ht=r.n(ft);function wt(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var kt={name:"WebdavExport",props:{filepath:{required:!1,default:"/dev_notes_backup.json"},password:{required:!1}},data:function(){return{loading:!1,snackbar:{fail:{show:!1,error:null},success:{show:!1}}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?wt(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):wt(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)({webdavSettings:"secrets/getWebdavSettings"}),{},Object(o.d)({notes:function(e){return e.note.notes},boards:function(e){return e.board.boards},boardOrder:function(e){return e.board.boardOrder},noteOrder:function(e){return e.note.noteOrder}})),methods:{onDownloadFile:function(){var e=this,t=w(this.password,this.notes,this.boards,this.boardOrder,this.noteOrder),r=ht.a.createClient(this.webdavSettings.url,{username:this.webdavSettings.username,password:this.webdavSettings.password});this.loading=!0,r.putFileContents(this.filepath,JSON.stringify(t)).then((function(){e.loading=!1,e.snackbar.success.show=!0})).catch((function(t){e.snackbar.fail.error=t,t&&t.response&&401===t.response.status&&(e.snackbar.fail.error=e.$t("backup.webdav.export.error.invalid")),e.snackbar.fail.show=!0,e.loading=!1}))}}},gt=Object(_.a)(kt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onDownloadFile}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_upload")]),e._v("\n    "+e._s(e.$t("backup.webdav.export.title"))+"\n  ")],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary"}},[r("v-card-text",[e._v("\n        "+e._s(e.$t("backup.webdav.export.loading"))+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.fail.show,callback:function(t){e.$set(e.snackbar.fail,"show",t)},expression:"snackbar.fail.show"}},[e._v("\n    "+e._s(e.$t("backup.webdav.export.error.general",{err:e.snackbar.fail.error}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.fail.show=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success.show,callback:function(t){e.$set(e.snackbar.success,"show",t)},expression:"snackbar.success.show"}},[e._v("\n    "+e._s(e.$t("backup.webdav.export.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success.show=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"2cf29ce7",null),mt=gt.exports;j()(gt,{VBtn:P.a,VCard:S.a,VCardText:C.b,VDialog:$.a,VIcon:V.a,VProgressLinear:E.a,VSnackbar:D.a});function Ot(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function yt(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ot(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Ot(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _t={name:"WebdavImport",components:{BackupUnlock:T},props:{filepath:{required:!1,default:"/dev_notes_backup.json"}},data:function(){return{downloadError:null,unlock:{show:!1,providePasswordCallback:null},loading:!1,snackbar:{error:!1,success:!1}}},computed:yt({},Object(o.c)({webdavSettings:"secrets/getWebdavSettings"})),methods:yt({},Object(o.b)({setBoardOrder:"board/setBoardOrder",addBoard:"board/addBoard",clearBoards:"board/clearBoards",setNoteOrder:"note/setNoteOrder",addNote:"note/addNote",clearNotes:"note/clearNotes"}),{onUploadFile:function(){var e=this;this.downloadError=null,this.loading=!0,ht.a.createClient(this.webdavSettings.url,{username:this.webdavSettings.username,password:this.webdavSettings.password}).getFileContents(this.filepath,{format:"text"}).then((function(content){e.loading=!1;var t=new Promise((function(t,r){e.unlock.providePasswordCallback=t,e.unlock.show=!0}));k(content,t).then((function(t){if(t instanceof Error)return e.downloadError=t,void(e.snackbar.error=!0);e.clearNotes(),e.clearBoards();var r=!0,n=!1,o=void 0;try{for(var c,l=t.notes[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var d=c.value;e.addNote(d)}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}e.setNoteOrder(t.noteOrder);var v=!0,f=!1,h=void 0;try{for(var w,k=t.boards[Symbol.iterator]();!(v=(w=k.next()).done);v=!0){var m=w.value;e.addBoard(m)}}catch(e){f=!0,h=e}finally{try{v||null==k.return||k.return()}finally{if(f)throw h}}e.setBoardOrder(t.boardOrder),e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.snackbar.success=!0})).catch((function(t){e.unlock.show=!1,e.unlock.providePasswordCallback=null,e.downloadError=e.$t("backup.encryption.password.invalid"),e.snackbar.error=!0}))})).catch((function(t){e.loading=!1,e.downloadError=t,t&&t.response&&(401===t.response.status?e.downloadError=e.$t("backup.webdav.import.error.invalid"):404===t.response.status&&(e.downloadError=e.$t("backup.webdav.import.error.not-found"))),e.snackbar.error=!0}))}})},xt=Object(_.a)(_t,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onUploadFile}},[r("v-icon",{attrs:{left:""}},[e._v("cloud_download")]),e._v("\n    "+e._s(e.$t("backup.webdav.import.title"))+"\n  ")],1),e._v(" "),r("BackupUnlock",{attrs:{show:e.unlock.show,providePassword:e.unlock.providePasswordCallback},on:{"update:show":function(t){return e.$set(e.unlock,"show",t)},"update:providePassword":function(t){return e.$set(e.unlock,"providePasswordCallback",t)},"update:provide-password":function(t){return e.$set(e.unlock,"providePasswordCallback",t)}}}),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary"}},[r("v-card-text",[e._v("\n        "+e._s(e.$t("backup.webdav.import.loading"))+"\n        "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:e.snackbar.error,callback:function(t){e.$set(e.snackbar,"error",t)},expression:"snackbar.error"}},[e._v("\n    "+e._s(e.$t("backup.webdav.import.error.general",{err:e.downloadError}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.error=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"success",timeout:5e3},model:{value:e.snackbar.success,callback:function(t){e.$set(e.snackbar,"success",t)},expression:"snackbar.success"}},[e._v("\n    "+e._s(e.$t("backup.webdav.import.success"))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.success=!1}}},[r("v-icon",[e._v("close")])],1)],1)],1)}),[],!1,null,"6cf25c5c",null),jt=xt.exports;function Pt(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function St(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Pt(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Pt(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}j()(xt,{VBtn:P.a,VCard:S.a,VCardText:C.b,VDialog:$.a,VIcon:V.a,VProgressLinear:E.a,VSnackbar:D.a});var Ct={name:"BackupWebdav",components:{WebdavImport:jt,WebdavExport:mt},props:{defaultDirectory:{required:!1,default:"/"},defaultFilename:{required:!1,default:"dev_notes_backup.json"},password:{required:!1}},data:function(){return{showPassword:!1,webdav:{url:null,user:null,password:null},directory:this.defaultDirectory,filename:this.defaultFilename}},computed:St({},Object(o.c)({webdavSettings:"secrets/getWebdavSettings"}),{},Object(o.d)({isEncrypted:function(e){return e.settings.encrypted}}),{filePath:function(){return"".concat(this.directory,"/").concat(this.filename).replace("//","/")},isValid:function(){return this.webdav.url&&this.webdav.user&&this.webdav.password}}),methods:St({},Object(o.b)({saveWebdavSettings:"secrets/setWebdavSettings"}),{onSettingsChange:function(){this.saveWebdavSettings({url:this.webdav.url,username:this.webdav.user,password:this.webdav.password,directory:this.directory?this.directory:this.defaultDirectory,filename:this.filename?this.filename:this.defaultFilename})}}),mounted:function(){this.webdavSettings&&(this.webdav.url=this.webdavSettings.url,this.webdav.user=this.webdavSettings.username,this.webdav.password=this.webdavSettings.password,this.directory=this.webdavSettings.directory?this.webdavSettings.directory:this.defaultDirectory,this.filename=this.webdavSettings.filename?this.webdavSettings.filename:this.defaultFilename)}},$t=Object(_.a)(Ct,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-text",[e.isEncrypted?e._e():r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-alert",{attrs:{type:"warning",dense:"",dismissible:""}},[e._v(e._s(e.$t("backup.webdav.settings.warn.decrypted")))])],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:e.$t("backup.webdav.settings.url"),placeholder:e.$t("backup.webdav.settings.url-example")},on:{change:e.onSettingsChange},model:{value:e.webdav.url,callback:function(t){e.$set(e.webdav,"url",t)},expression:"webdav.url"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:e.$t("backup.webdav.settings.user")},on:{change:e.onSettingsChange},model:{value:e.webdav.user,callback:function(t){e.$set(e.webdav,"user",t)},expression:"webdav.user"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{type:e.showPassword?"text":"password",label:e.$t("backup.webdav.settings.password"),"append-icon":e.showPassword?"visibility":"visibility_off"},on:{"click:append":function(t){e.showPassword=!e.showPassword},change:e.onSettingsChange},model:{value:e.webdav.password,callback:function(t){e.$set(e.webdav,"password",t)},expression:"webdav.password"}})],1)],1),e._v(" "),e.webdav.url?r("v-row",[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-text-field",{attrs:{label:e.$t("backup.webdav.settings.directory")},on:{change:e.onSettingsChange},model:{value:e.directory,callback:function(t){e.directory=t},expression:"directory"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:e.$t("backup.webdav.settings.filename")},on:{change:e.onSettingsChange},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1)],1):e._e()],1),e._v(" "),r("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.isValid,expression:"isValid"}]},[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("WebdavExport",{attrs:{filepath:e.filePath,password:e.password},on:{"update:filepath":function(t){e.filePath=t}}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("WebdavImport",{attrs:{filepath:e.filePath},on:{"update:filepath":function(t){e.filePath=t}}})],1)],1)],1)],1)}),[],!1,null,"dffc45e2",null),Vt=$t.exports;function Et(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}j()($t,{VAlert:te.a,VCard:S.a,VCardActions:C.a,VCardText:C.b,VCol:ne.a,VRow:oe.a,VTextField:A.a});var Dt={components:{BackupWebdav:Vt,BackupGist:Me,BackupEncryption:pe,BackupFile:_e,BackupS3:se,BackupDropbox:vt},data:function(){return{password:null,dialog:{encryption:{open:!1}},panel:0}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Et(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Et(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)({persistedPassword:"secrets/getBackupPassword"})),methods:{onPasswordChange:function(e){this.password=e}},mounted:function(){this.persistedPassword&&(this.password=this.persistedPassword)}},Bt=r(434),Ft=r(1017),Nt=r(1018),At=r(1019),It=r(1020),Tt=r(1021),Ut=r(1022),qt=Object(_.a)(Dt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-layout",{attrs:{column:"","justify-center":""}},[r("v-dialog",{model:{value:e.dialog.encryption.open,callback:function(t){e.$set(e.dialog.encryption,"open",t)},expression:"dialog.encryption.open"}},[r("BackupEncryption",{on:{onPasswordChange:e.onPasswordChange}},[r("div",{staticClass:"flex-grow-1"}),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialog.encryption.open=!1}}},[e._v("\n          "+e._s(e.$t("common.confirmation.close"))+"\n        ")])],1)],1),e._v(" "),r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12"}},[r("v-expansion-panels",{attrs:{accordion:"",focusable:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v(e._s(e.$t("backup.file.title")))]),e._v(" "),r("v-expansion-panel-content",[r("BackupFile",{attrs:{password:e.password},on:{"update:password":function(t){e.password=t}}})],1)],1),e._v(" "),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v(e._s(e.$t("backup.webdav.title")))]),e._v(" "),r("v-expansion-panel-content",[r("BackupWebdav",{attrs:{password:e.password},on:{"update:password":function(t){e.password=t}}})],1)],1),e._v(" "),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v(e._s(e.$t("backup.gist.title")))]),e._v(" "),r("v-expansion-panel-content",[r("BackupGist",{attrs:{password:e.password},on:{"update:password":function(t){e.password=t}}})],1)],1),e._v(" "),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v(e._s(e.$t("backup.aws.s3.title")))]),e._v(" "),r("v-expansion-panel-content",[r("BackupS3",{attrs:{password:e.password},on:{"update:password":function(t){e.password=t}}})],1)],1),e._v(" "),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v(e._s(e.$t("backup.dropbox.title")))]),e._v(" "),r("v-expansion-panel-content",[r("BackupDropbox",{attrs:{password:e.password},on:{"update:password":function(t){e.password=t}}})],1)],1)],1)],1)],1)],1),e._v(" "),r("v-footer",{staticClass:"pa-0",attrs:{app:""}},[r("v-toolbar",{attrs:{dense:"",color:"footer"}},[r("div",{staticClass:"flex-grow-1"}),e._v(" "),r("v-toolbar-items",[r("v-btn",{attrs:{color:e.password?"primary":""},on:{click:function(t){e.dialog.encryption.open=!0}}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.password?"lock":"lock_open"))]),e._v("\n          "+e._s(e.$t("backup.encryption.title"))+"\n        ")],1)],1)],1)],1)],1)}),[],!1,null,"60377610",null);t.default=qt.exports;j()(qt,{VBtn:P.a,VCol:ne.a,VContainer:Bt.a,VDialog:$.a,VExpansionPanel:Ft.a,VExpansionPanelContent:Nt.a,VExpansionPanelHeader:At.a,VExpansionPanels:It.a,VFooter:Tt.a,VIcon:V.a,VLayout:Ut.a,VRow:oe.a,VToolbar:z.a,VToolbarItems:Y.a})},575:function(e,t){},912:function(e,t){},914:function(e,t){},945:function(e,t){},946:function(e,t){}}]);